<!DOCTYPE html>
<html>
<head>
	<title><%= title %></title>
	<link rel='stylesheet' href='/stylesheets/style.css' />
	<link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">
	
</head>
<body>
	<%- include('menu', {active: "createrecipe"}); %>

	<div class="main">

		<h1><%= title %></h1>

		<div class="createRecipe-form">
			
			<form name="createR" method="post" action="/createrecipe">
				<p>Recipe title: </p>
				<input id="inputtitle" type="text" name="title" placeholder="Recipe title" required> 

				<p>Category: </p>
				<select name="listcategory" required>

					<!-- Get category data from database and add it to options  -->

					<%categories.forEach(function (cat) { %>
					<option value="<%=cat.category_name%>"><%=cat.category_name%></option>
					<% });%>

				</select>

				<p>Yield:</p> 

				<input id="inputyield" type="text" name="yield" placeholder="Yield" required>


				<p>Ingredients:</p> <br>

				<div id="addNewIngredients" >

					<!-- Here dynamically will be added ingredients after pressing a below button -->
				</div>

				<input type="button" id="addnewfieldBtn" value="Add ingredient" onClick="addIngrFields();">
				<br>

				<p>Directions:</p> 
				<textarea rows="20" cols="54" id="inputdirections" type="text" name="directions" placeholder="Directions" required> </textarea>

				<button id="btnCreate" type="submit">Create Recipe</button>
			</form>
		</div>

	</div>

	<!-- Template for adding ingredients -->

	<div id="addIngrTemplate" style="display: none">

		<select class="listingredient" name="listingredient" required>

			<!-- Get ingredients data from database and add it to options  -->

			<option value="">Select...

				<%onlyIngr.forEach(function (ingr) { %>

				<option value="<%=ingr.ingredient_name%>"><%=ingr.ingredient_name%></option>
				<% });%>

			</select>

			&nbsp Quantity: &nbsp
			<input class="inputquantity" type="text" name="quantity" placeholder="Quantity" required>

			&nbsp Unit: &nbsp
			<select class="listunit" name="listunit" required>

				<!-- Get ingredient_unit data from database and add it to options  -->

				<%units.forEach(function (unit) { %>
				<option value="<%=unit.unit_code%>"><%=unit.unit_code%></option>
				<% });%>

			</select>

			&nbsp

		</select>

	</div>

	<script src="/javascripts/createR.js" type="text/javascript"> </script>

</body>
</html>
